<div class="main">
        <div class="divBox">
    
                <div class="card">
                        <article class="card-body">
                        <div routerLink="/view/datasets" class="float-right btn button">My Datasets</div>
                   
                        <h4 class="card-title mb-4 mt-1">New Dataset</h4>
                        

                        <form [formGroup]="formGroup" (validSubmit)="onSubmit()">

                                        <div class="form-group">
                                          <label class="control-label">Title</label>
                                          <input type="text" class="form-control" formControlName="Title"  [ngModel]="title" (ngModelChange)="titleModelChange($event)" placeholder="A descriptive title">
                                        </div>

                                        <div class="form-group">
                                          <label>Description</label>
                                          <textarea name="" class="form-control" formControlName="Description" [ngModel]="description" (ngModelChange)="descriptionModelChange($event)" rows="3" placeholder="Some useful notes about the group" type="text"></textarea>
                                        </div>

                                        <div class="form-group">
                                          <label>Tags</label>
                                          <input type="text" class="form-control"  formControlName="Tags" [ngModel]="tags" (ngModelChange)="tagsModelChange($event)" placeholder="land use, land cover...">
                                        </div>

                                        <div class="form-group">
                                          <label>License</label>
                                          <div style="width: 15px"></div>
                                          <select class="sizeDropdown sizeInput" formControlName="License" [ngModel]="license" (ngModelChange)="licenseModelChange($event)">
                                                <option *ngFor="let lic of licences" value="{{lic.id}}">{{lic.title}}</option>
                                          </select>
                                        
                                        </div>

                                        <div class="form-group">
                                          <label>Repository</label>
                                          <div style="width: 15px"></div>
                                          <select class="sizeDropdown sizeInput" formControlName="Repository" [ngModel]="repository" (ngModelChange)="repositoryModelChange($event)">
                                                <option *ngFor="let repo of repositories" value="{{repo.repo_id}}">{{repo.name}}</option>
                                          </select>
                                        
                                        </div>

                                        <div class="form-group">
                                           <label>Collaborators</label>
                                           <div style="width: 15px"></div>
                                           <select class="sizeDropdown sizeInput" formControlName="Collaborators" [ngModel]="collaborators" (ngModelChange)="collaboratorsModelChange($event)">
                                              <ng-container *ngFor="let group of groups">
                                                 <option *ngIf="group.ckan_group_id" value="{{group.ckan_group_id}}">
                                                 {{group.name}}
                                                 </option>
                                              </ng-container>
                                           </select>

                                        </div>
                                        
                                        <div class="form-group">
                                            <label>Maintainer</label>
                                            <input name="" class="form-control" formControlName="Maintainer" [ngModel]="maintainer" (ngModelChange)="maintainerModelChange($event)" placeholder="Maintainer name" type="text">
                                        </div>

                                        <div class="form-group">
                                          <label>Visibility</label>
                                          <div style="width: 15px"></div>
                                          <select class="sizeDropdown sizeInput" formControlName="Visibility" [ngModel]="visibility" (ngModelChange)="visibilityModelChange($event)">
                                                <option value="false">Public</option>
                                                <option value="true">Private</option>
                                          </select>
                                        
                                        </div>

                                        <div class="form-group">
                                            <label>Author Email</label>
                                            <input name="" class="form-control" formControlName="AuthorEmail" [ngModel]="authoremail" (ngModelChange)="authorEmailModelChange($event)" placeholder="Email address" type="text">
                                        </div>
                                        
                                        <br>
                                        <hr class="style1">
                                        <br>
                                                                  
                                        <div>
                                            <label>Custom Field</label>
                                        </div>
                                        <br>
                                                <div class="form-group">

                                                        <div>
                                                        
                                                                <div class="input-group mb-3 sizeInput float-right">
                                                                <div class="input-group-prepend">
                                                                <span class="input-group-text" id="basic-addon3">Key:</span>
                                                                </div>
                                                                <input name="" class="form-control" formControlName="Key1" [ngModel]="key1" (ngModelChange)="key1ModelChange($event)" type="text">
                                                        </div>
                                                
                                                        <div class="input-group mb-3 sizeInput float-left">
                                                                <div class="input-group-prepend">
                                                                <span class="input-group-text" id="basic-addon3">Value:</span>
                                                                </div>
                                                                <input name="" class="form-control" formControlName="Value1" [ngModel]="value1" (ngModelChange)="value1ModelChange($event)" type="text">
                                                        </div>
                                                        
                                                        </div>
                                                        
                                                        <br>
                                                        <br>
                                                        <br>

                                                        <div>

                                                        <div class="input-group mb-3 sizeInput float-right">
                                                                <div class="input-group-prepend">
                                                                <span class="input-group-text" id="basic-addon3">Key:</span>
                                                                </div>
                                                                <input name="" class="form-control" formControlName="Key2" [ngModel]="key2" (ngModelChange)="key2ModelChange($event)" type="text">
                                                        </div>
                                                        
                                                        <div class="input-group mb-3 sizeInput float-left">
                                                                <div class="input-group-prepend">
                                                                <span class="input-group-text" id="basic-addon3">Value:</span>
                                                                </div>
                                                                <input name="" class="form-control" formControlName="Value2" [ngModel]="value2" (ngModelChange)="value2ModelChange($event)" type="text">
                                                        </div>
        
                                                        </div>
                                                        <br>
                                                        <br>
                                                        <br>

                                                        <div>

                                                        <div class="input-group mb-3 sizeInput float-right">
                                                                <div class="input-group-prepend">
                                                                <span class="input-group-text" id="basic-addon3">Key:</span>
                                                                </div>
                                                                <input name="" class="form-control" formControlName="Key3" [ngModel]="key3" (ngModelChange)="key3ModelChange($event)" type="text">
                                                        </div>
                                                        
                                                        <div class="input-group mb-3 sizeInput float-left">
                                                                <div class="input-group-prepend">
                                                                <span class="input-group-text" id="basic-addon3">Value:</span>
                                                                </div>
                                                                <input name="" class="form-control" formControlName="Value3" [ngModel]="value3" (ngModelChange)="value3ModelChange($event)" type="text">
                                                        </div>
        
                                                        </div>
                                                </div> <!-- form-group// -->
  
                                                <br>
                                                <br>
                                        <br>
                                        <hr class="style1">
                                        <br>

                                                <div *ngIf="showUpload" class="form-group">
                                                        <label>Data</label>
                                                        
                                                        <br>

                                                        <app-file
                                        
                                                        (toggle)="getName($event)"

                                                        [repo_id]="repo_id"
                                                    
                                                        >
                                                        </app-file>

                                                        <button (click)="changeLink()" class="btn btn-outline-secondary" type="button" (click)="onReset()">Link</button>
                                                </div>
                                                
                                                <div *ngIf="showLink" class="form-group">
                                                        <label>URL</label>
                                                        <br>
                                                        <input name="" class="form-control float-left sizetext" formControlName="DataURL" [ngModel]="dataurl" (ngModelChange)="urlModelChange($event)" placeholder="http://exemple.com/external-data.csv"  type="text"> <button (click)="changeUpload()" class="btn btn-outline-danger" style="margin-left: 15px;" type="button">Remove</button>
                                                </div>

                                                <div class="form-group">
                                                        <label>Name</label>
                                                        <input name="" class="form-control" formControlName="DataName" [ngModel]="dataname" (ngModelChange)="dataNameModelChange($event)" placeholder="" type="text"  placeholder="Datafile name">
                                                </div>

                                                <div class="form-group">
                                                        <label>Description</label>
                                                        <textarea name="" class="form-control" formControlName="DataDescription" [ngModel]="datadescription" (ngModelChange)="dataDescriptionModelChange($event)" rows="3" placeholder="Some useful notes about the group" type="text"></textarea>
                                                </div>

                                                <div class="form-group">
                                                        <label>Format</label>
                                                        <input name="" class="form-control" formControlName="DataFormat" [ngModel]="dataformat" (ngModelChange)="dataFormatModelChange($event)" placeholder="CSV, XLS or JSON" type="text">
                                                </div>  

                                                <hr class="style1">

                                                <button class="btn btn-outline-secondary" type="button" (click)="onReset()">Reset</button>
                        
                                                <button class="btn btn-primary pull-right button" type="submit">Publish</button>
                        
                                            </form>
                        
                                            </article>
                                        </div>
                            </div>
                        
                                        <div class=""  *ngIf="showMsg" style="width: 50%; margin-left: 25%; margin-right: 25%">
                                                <div class="col-xs-12">
                                                <p class="alert alert-success">
                                                    <strong>Successful creation!</strong> Please click <a routerLink="/datasets">here</a> to view!
                                        
                                                </p>
                                            </div>
                                            </div>
                        
                                            <div style="margin-bottom: 95px">
                                                </div>
                        </div>
                        